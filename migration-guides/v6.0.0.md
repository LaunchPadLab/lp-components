# v6.0.0 Migration Guide
This version contains the following breaking changes:

1. `<Select />` now has a `placeholder` prop by default ("Select")
1. `<Button />` and `<SubmitButton />` now use `aria-disabled` instead of `disabled`
1. The `style` prop on `<Button />` and `<SubmitButton />` has been renamed to `variant`
1. Labels for `<CheckboxGroup />` and `<RadioGroup />` now use a `<legend>` html tag rather than a `<label>`
1. The `hideLabel` prop on `<RangeInput />` has been renamed to `hideRangeValue`
<<<<<<< HEAD
1. The tag on `<Spinner />` now uses the class `spinner` in place of an id
=======
1. `<CloudinaryFileInput />` and `<FileInput />` components now store an array of objects representing the file data as opposed to a string
1. `<CloudinaryFileInput />` and `<FileInput />` components no longer accept an `onLoad` prop
1. The `previewComponent` for a file input no longer receives a `value` prop and `file` is a file object (with the url)
>>>>>>> v6

The required changes for each item are detailed below.

---

## 1. `<Select />` now has a `placeholder` prop by default ("Select")

It's likely that you are already providing placeholders to each instance of `<Select />` in your application. However, if there are instances that must not have a placeholder, you can replicate this behavior in `v4` by passing a false `placeholder` prop:

```jsx
<Field name="foo" component={Select} options={[]} placeholder={false} />
```

## 2. `<Button />` and `<SubmitButton />` now use `aria-disabled` instead of `disabled`

This change requires an update to stylesheets in your application to target `aria-disabled` rather than `disabled`:

```scss
// Before
button:disabled {
  // ...disabled styles
}

// After
button[aria-disabled='true'] {
  // ...disabled styles
}
```

_Note: this update likely won't be necessary in apps that use the LaunchPad Lab `client-template` since those styles target a common `.is-disabled` class._

## 3. The `style` prop on `<Button />` and `<SubmitButton />` has been renamed to `variant`

Any `<Button />` and `<SubmitButton />` with a `style` prop should be updated to use `variant` instead.

```jsx
// Before
<Button style="secondary" />

// After
<Button variant="secondary" />
```

_Hint: a global text search for `style="` should point you to where this update needs to happen._

## 4. Labels for `<CheckboxGroup />` and `<RadioGroup />` now use a `<legend>` html tag rather than a `<label>`

To avoid visual regressions, make sure any global styles applied to `<label>` elements in your stylesheets also apply to `<legend>` elements.

```scss
// Before
label {
  // ...global label styles
}

// After
label, legend {
  // ...global label styles
}
```

## 5. The `hideLabel` prop on `<RangeInput />` has been renamed to `hideRangeValue`

Any `<RangeInput />` with a `hideLabel` prop should be updated to use `hideRangeValue` instead.

```jsx
// Before
<RangeInput input={rangeInputProps} hideLabel={true} />

// After
<RangeInput input={rangeInputProps} hideRangeValue={true} />
```

## 6. `<CloudinaryFileInput />` and `<FileInput />` components now store an array of objects representing the file data as opposed to a string

This will affect how the value is stored in redux and could subsequently also affect the shape of the API request body (if not transformed beforehand). You may also need to update your API endpoint to accept additional file information (e.g., name, lastModified) if you plan on showing this information at a later point in time (e.g., on edit of an existing profile).

```jsx
// Before
const Form = () => (
  <form onSubmit={handleSubmit}>
    <Field
      name="profilePhoto"
      component={FileInput}
    />
  </form>
)

<Form
  onSubmit={({ profilePhoto }) => {
    return updateProfilePhotoUrl(profilePhoto)
  }}
/>

// After
const Form = () => (
  <form onSubmit={handleSubmit}>
    <Field
      name="profilePhoto"
      component={FileInput}
    />
  </form>
)

<Form
  onSubmit={({ profilePhoto }) => {
    return updateProfilePhotoUrl(profilePhoto[0].url)
  }}
/>
```

Additionally, if you only have access to the url of the image, then you'll need to transform the data in the `initialValues` prop. Remember to pass in an array!

```jsx
// Before
<Form
  initialValues={{
    profilePhoto: profile.imageUrl,
  }}
/>

// After
<Form
  initialValues={{
    profilePhoto: [{
      url: profile.imageUrl,
    }]
  }}
/>
```

## 7. `<CloudinaryFileInput />` and `<FileInput />` components no longer accept an `onLoad` prop

If you're passing in `onLoad` to perform something external to the component, you can use `onChange` instead. `onChange` will only accept one argument (file object or objects) as opposed to `onLoad` accepting the url string and the FileList item separately.

```jsx
import { Field } from 'redux-form'

// Before
<Field
  name="profilePhoto"
  component={FileInput}
  onLoad={(url, fileItem) => {
    console.log(fileItem.name, url)
  }}
/>

// After
<Field
  name="profilePhoto"
  component={FileInput}
  onChange={(file) => {
    console.log(file.name, file.url)
  }}
/>
```

## 8. The `previewComponent` for a file input no longer receives a `value` prop and `file` is a file object (with the url)

If you're passing in a custom `previewComponent`, you must modify your logic to only access the `value` object.

```jsx
// Before
const PreviewComponent = ({ file, value }) => {
  return (
    <div>
      <p>Name: {file.name}</p>
      <p>URL: {value}</p>
    </div>
  )
}
<FileInput previewComponent={PreviewComponent} />

// After
const PreviewComponent = ({ file }) => {
  return (
    <div>
      <p>Name: {file.name}</p>
      <p>URL: {file.url}</p>
    </div>
  )
}
<FileInput previewComponent={PreviewComponent} />
```

#### 6. The tag on `<Spinner />` now uses the classname `spinner` in place of an id

`<Spinner />` utilizes a classname that can be custom in order to accomodate views where more than one spinners are necessary.

```jsx
// Before
<div id="spinner" { ...filterInvalidDOMProps(props) } />

// After
<div className="custom" { ...filterInvalidDOMProps(props) } />
```
